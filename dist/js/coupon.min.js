$(document).ready(function(){$(".btn-redeem-item-js").on("click",function(){var $btn=$(this);if($btn.prop("disabled")){return false}$btn.prop("disabled",true).text(translations.redeemIng);var coupon_code=$btn.data("code").trim();if(coupon_code==""){$btn.prop("disabled",false).text(translations.redeem);showToast(translations.couponCodeRequired,"#toast-js");return false}var $data={coupon_code:coupon_code};$data[csrfName]=csrfVal;$.ajax({timeout:6e3,dataType:"json",type:"post",data:$data,url:redeemCouponUrl,success:function(data,textStatus){showToast(data.message,"#toast-js");if(data.status=="success"){setTimeout(function(){window.location.href=couponUrl},1500)}else if(data.status=="login"){setTimeout(function(){window.location.href=data.login_url},1500)}$btn.prop("disabled",false).text(translations.redeem)},error:function(XMLHttpRequest,textStatus,errorThrown){alert(translations.systemError);$btn.prop("disabled",false).text(translations.redeem)}})});$("#btn-coupon-apply-js").on("click",function(){var $btn=$(this);if($btn.prop("disabled")){return false}$btn.prop("disabled",true).text(translations.redeemIng);var coupon_code=$("#coupon-code-js").val().trim();if(coupon_code==""){$btn.prop("disabled",false).text(translations.redeem);showToast(translations.couponCodeRequired,"#toast-js");return false}var $data={coupon_code:coupon_code};$data[csrfName]=csrfVal;$.ajax({timeout:6e3,dataType:"json",type:"post",data:$data,url:redeemCouponUrl,success:function(data,textStatus){showToast(data.message,"#toast-js");if(data.status=="success"){setTimeout(function(){window.location.href=couponUrl},1500)}else if(data.status=="login"){setTimeout(function(){window.location.href=data.login_url},1500)}$("#coupon-code-js").val("");$btn.prop("disabled",false).text(translations.redeem)},error:function(XMLHttpRequest,textStatus,errorThrown){alert(translations.systemError);$btn.prop("disabled",false).text(translations.redeem)}})})});