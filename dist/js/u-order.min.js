function updateOrderStatus(order_sn,data){const $orderCard=$('.order-card-js[data-order-sn="'+order_sn+'"]');$orderCard.find(".order-actions-js").html(data.actions);$orderCard.find(".order-status-js").text(data.statusText)}function CancelOrder(order_sn){$.ajax({url:cancelUrl,type:"post",data:{[csrfName]:csrfVal,order_sn:order_sn},success:function(data){if(data.status=="success"){showToast(translations.cancelSuccess,"#toast-js")}updateOrderStatus(order_sn,data);$("#orderActionsModal").modal("hide")},error:function(){alert("Network error")}})}function ReceiptOrder(order_sn){$.ajax({url:receiptUrl,type:"post",data:{[csrfName]:csrfVal,order_sn:order_sn},success:function(data){if(data.status=="success"){showToast(translations.receiptSuccess,"#toast-js")}updateOrderStatus(order_sn,data);$("#orderActionsModal").modal("hide")},error:function(){alert("Network error")}})}$(document).ready(function(){const lazyLoadInstance=new LazyLoad({});$("#orderActionsModal").on("show.bs.modal",function(event){const $button=$(event.relatedTarget);const source=$button.data("source");const orderSN=$button.data("order-sn");$(this).data("current-order-sn",orderSN);$(this).data("current-source",source);if(source==="cancel"){$("#orderActionsModal .modal-title").text(translations.cancelTitle);$("#orderActionsModal .modal-body").text(translations.cancelBody);$("#orderActionsModal .modal-footer .btn-primary").text(translations.yesCancel);$("#orderActionsModal .modal-footer .btn-secondary").text(translations.no)}else if(source==="receipt"){$("#orderActionsModal .modal-title").text(translations.receiptTitle);$("#orderActionsModal .modal-body").text(translations.receiptBody);$("#orderActionsModal .modal-footer .btn-primary").text(translations.yesReceived);$("#orderActionsModal .modal-footer .btn-secondary").text(translations.notYet)}});$("#orderActionsModal").on("click",".btn-primary",function(){const modal=$("#orderActionsModal");const source=modal.data("current-source");const orderSN=modal.data("current-order-sn");if(source==="cancel"){CancelOrder(orderSN)}else if(source==="receipt"){ReceiptOrder(orderSN)}});$("#product-list-more").infiniteScroll({path:function(){if(this.loadCount<maxPage-1){return UrlUtils.mergeParams(base_url,{...url_params,p:this.loadCount+2})}},append:false,history:false,responseBody:"json",fetchOptions:{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json",Accept:"application/json"}},checkLastPage:true,scrollThreshold:100,status:".page-load-status",prefill:false,debug:false});$("#product-list-more").on("load.infiniteScroll",function(event,body,path){if(body&&body.html&&body.html.trim()!==""){$(this).append(body.html);if(typeof lazyLoadInstance!=="undefined"){lazyLoadInstance.update()}}});$("#product-list-more").on("error.infiniteScroll",function(event,error,path){console.error("Failed to load page via AJAX:",path,error);alert("Failed to load more items. Please try again later.")});$("#product-list-more").on("append.infiniteScroll",function(event,body,path,items){});$("#product-list-more").on("last.infiniteScroll",function(){})});