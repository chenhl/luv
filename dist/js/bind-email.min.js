function t(text,...args){return args.length?text.replace(/{(\d+)}/g,(match,number)=>args[number]||match):text}function validateEmail(email){const messageEl=$("#email-message-js");if(!email){showError(messageEl,translations.emailRequired,$emailInput);return false}if(!isValidEmail(email)){showError(messageEl,translations.emailInvalid,$emailInput);return false}hideError(messageEl,$emailInput);return true}$(document).ready(function(){var $emailInput=$("#email");$emailInput.on("blur",function(){const email=$(this).val().trim();const messageEl=$("#email-message-js");if(!email){showError(messageEl,translations.emailRequired,$emailInput)}else if(!isValidEmail(email)){showError(messageEl,translations.emailInvalid,$emailInput)}else{hideError(messageEl,$emailInput);$(this).removeClass("is-invalid")}});var $verificationCodeInput=$("#verification_code");$verificationCodeInput.on("blur",function(){});$("#agree").on("change",function(){if($(this).is(":checked")){$(this).removeClass("is-invalid")}else{$(this).addClass("is-invalid")}});$("#btn-send-code-js").on("click",function(e){$(this).prop("disabled",true);const email=$emailInput.val().trim();const messageEl=$("#email-message-js");if(!email){showError(messageEl,translations.emailRequired,$emailInput);$(this).prop("disabled",false);return}else if(!isValidEmail(email)){showError(messageEl,translations.emailInvalid,$emailInput);$(this).prop("disabled",false);return}var data={email:email};data[csrfName]=csrfVal;$.ajax({url:sendCodeUrl,method:"POST",data:data,success:function(response){if(response.status=="success"){var countdown=countdownTime;var interval=setInterval(function(){if(countdown===0){clearInterval(interval);$("#btn-send-code-js").text(translations.sendCodeText).prop("disabled",false)}else{$("#btn-send-code-js").text(t(translations.resendText,countdown));countdown--}},1e3)}else{console.error("Failed to send verification code:",response);alert(response.message);$("#btn-send-code-js").text(translations.sendCodeText).prop("disabled",false)}},error:function(error){alert(translations.sendCodeError);$("#btn-send-code-js").text(translations.sendCodeText).prop("disabled",false)}})});$("#bind-form").on("submit",function(e){const $form=$(this);const $btn=$("#btn-bind-email-js");if($form.data("submitting")){e.preventDefault();return false}let isValid=true;$("#email,#verification_code").trigger("blur");if(!$("#agree").is(":checked")){$("#agree").addClass("is-invalid")}if($("#email").hasClass("is-invalid")||$("#verification_code").hasClass("is-invalid")||$("#agree").hasClass("is-invalid")){isValid=false}if(!isValid){e.preventDefault();if($("#email").hasClass("is-invalid")){$("#email").focus()}else if($("#verification_code").hasClass("is-invalid")){$("#verification_code").focus()}else if($("#agree").hasClass("is-invalid")){$("#agree").focus()}return false}$form.data("submitting",true);$btn.prop("disabled",true).text(translations.bindIng)})});